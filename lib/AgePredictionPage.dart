import 'dart:convert';
import 'dart:io';

import 'package:flutter/material.dart';
import 'package:http/http.dart' as http;
import 'package:http/io_client.dart';

class AgePredictionPage extends StatefulWidget {
  @override
  _AgePredictionPageState createState() => _AgePredictionPageState();
}

class _AgePredictionPageState extends State<AgePredictionPage> {
  TextEditingController _nameController = TextEditingController();
  String _age = '';
  String _imageUrl = '';
  String _message = '';

  Future<void> predictAge(String name) async {
    HttpClient client = new HttpClient();
    client.badCertificateCallback =
    ((X509Certificate cert, String host, int port) => true);
    http.Client ioClient = new IOClient(client);
    final response = await ioClient.get(Uri.parse('https://api.agify.io/?name=$name'));


    if (response.statusCode == 200) {
      final data = json.decode(response.body);
      int age = data['age'];

      String message;
      String imageUrl;

      if (age < 18) {
        message = "Joven";
        imageUrl = 'data:image/jpeg;base64,/9j/4AAQSkZJRgABAQAAAQABAAD/2wCEAAoHCBYVFRgWFhUZGRgaHBwdHBwcHB4cHxocHBoaHBweHBweIS4lHB4rHxkaJjgmKy8xNTU1GiQ7QDs0Py40NTEBDAwMEA8QHxISHjQrJSw2NDY0NjY0NDQ0NDQ0NDQ0NDQ0NDQ9NDQ0NDQ0NDQ0NDQ0NDQ0NDQ0NDQ0NDQ0NDQ0NP/AABEIALcBEwMBIgACEQEDEQH/xAAcAAABBQEBAQAAAAAAAAAAAAAAAwQFBgcBAgj/xABDEAACAQIDBQUFBQYEBQUAAAABAgADEQQSIQUxQVFhBiJxgZETMqGxwQdCUtHwFCNicpLhgqLC8RUkM1OyFmOD0uL/xAAZAQEAAwEBAAAAAAAAAAAAAAAAAgMEAQX/xAAnEQACAgICAgEEAgMAAAAAAAAAAQIRAyESMQRBMhMiUXEUYUKBsf/aAAwDAQACEQMRAD8A2aEIQAhCEAIQhACEIQAhORr+2LewBPXh6mAO4RkcbY+7pzv/AGi9LEK2gOvLjAFoQhACEIQDkJwmVzHducBRJV8UhYaELd9eXcB1g6k30WSEiNl9pMLiADSro2Y2AJysTyyNZvhJeA1R2EIQcCEIQAhCEAIQhACEIQAhCEAIQhACEIQAhCEAIQhACEIQDk4TOyB2hjyzMo91dD/G3EeAOniDON0djG3QtXxhdsq6LxPFh9F+c6H4DdKNtPt5hMOMjVM7j3lpjOc3EE3Cix0sW4RDA/aPh33UMVb8WRSP8rn5TqdLZJq3SNCbUSK2hWK6g2IPdI336SJp9uMJ953T+enUT4lbfGe8RtjDYgfua9Nzb3VdSeXu3vxnbOUWbs7tX29O595TlbrpcHzHxBkvKd2CQqcQD+JPk35iXGcONUzsIRDF3yNY2OVrHkbGxg4ZV297R1q4dKDFaKkrcaZyDY3PEX4bvOZb+wvm7y31ub8Ty8Zo2F2S9VkUAlN5uDbwJ+stGK7PUnUAhVI/CNPKZebbs2fTSVGZ7PTKgax6W3ix33GoNxwmj9gu1bPU/Zq7FiR+7cm5JFyVJ3nQEgnkeYiDdn6arluCAb6Cxvv333StfshoYrDsvdAr07207pqLmP8ASTOxk7OTgqo3GE5OzSZAhCEAIQhACEIQAhCEAIQhACEIQAhCEAIQhACEJyAE8swAuTYCMcXtNVuB3m5DcPE8PnIHH7TJ95hbkNAPz85CU0iyONyJXF7V3hdB+L8uUz37QNting3Wk1mZggIOozXLa88qtrHC1MRjahp4cWQGzudFHQn6DU+Egu3ew2w4p0mZH1erZQQQlJGF2vuuzqLCQjybsu4xj9q7ZXuzPYlq9H2zNYm5Vbe8B8ryUbEPRsgQnLbUNax/lOhtL/s2kEppbQBQPQRhisEuJfPSW2neYjuMfA7z1HrIuTZtwcIrjLr8jHZO2PapkxCLu7r5bZujDcDKt2xw2GyuyFA43AEXuOQ33lj23stVwtV2bO1iqhbqqEkADLe5O7fp0mb41XVO8NNxBA0I+N7xHbs7mxwafDo0X7He2LPUODrm7OC1Nz7zFRqrHicoJB/hM2SfKexcScHisPXvYo6sw4hbgMCOF1JE+rAZoPJkmnTCcYTsSxK3VgCQSCARvGnCCKKHs/FezQpkZshYG1huYjeSOUe/8SQ02cLuGt/7b4kMAj5kdFYXJswuDm1Jsb77n1iGLenSR1JRFQDu6AW8BwmU9FKxi20XJs2YFtypSdgLaHM+Ujj84w2jQZsoPvA6cPDfJ/Z2OV0JU5sul943A6HzkPi8UDUI4Df8IDiaFsLan7QjNkKFWK2PEWBDDob/AAkpK72QoMtIllCghQALkaA3sTvGtr9JYpoi21bMORJSaR2EISRA5Gm0MfToIXqOFUcTxPIDeT0EcVHCgkmwAJJPADeZlGPxTbSxLEkjDUyQo3X/ALtvJ3gWHIyMnxROEHJ0ONt/aS9yMOiKODP3mPkNB4ayvj7RceveZgByZFsfIKD8ZaxsGjYAUhYbrXFvSV7tNsVLFwtgBZvDr4c5Vzfs0vCktFs7O/aNQrAivlouLWOpRgeWl1I5H15XelVV1DKQykAgg3BB3EEbxPnD2QIWwsAPX9aes037LNpNZ8OxJUDOl+F9GA6XINvGWRl6M8oatGkQhCTKwhCEAIQhACEJ4dgASdw1gHitWVAWY2AkDise1S4F0T4t4ngOgnjE4lqjZz7o90chz8TGuIrgCUSyXpGqGKtvsSxNZUXkBIzZeynxzliSmGU2LDRqhG8LyHNvIa3t4p0GxlcUEJCDvVGH3U5D+Jtw8zwmi4agqKEQBVUAADcANwiEL2xkycdLsTwWDSkgSmgVV3AfrXxMzLt7USpjXA1KUUpNrcAs5ewHDRhfy5TSNtbRXD0KlViLIrNbmQNB62mBUtql/aVHN3LpUY8/3ilh8TLrpkPHdTTZpOx6vtKCqfey2PpvnoUqdFiGd0U6qwdiBfeMpJGhvw3eUisA7KLob27y8mRtRHmO2pSdCHsp4g85maqTN0luirbYre3xPsQxqW1DU81vBwNM364yE7d4pLgKLPuJHTf+UUq9o6eHdzTBZ2uN+4HfrwjDZ7tUqftFVQd2ltACbCw6XlkItuytytNJjbsrsU1qyVcQr+wV1Lni4vcgA6kcyOF+M+n1YEAjUEaW5THsHQKo3I3t6GTuxe0Bw2RHLMpVbqBe3DMOXhxl9GHi30aPCV2p2uwyrmzMT+HKQxv42HxjCv2xZhalRseBc/6V/ORs6sU36HW1sL7N1a/de48DvA+PwkNiXu7A0F/mcixtutlufW0bPXr1mu9ViFBYjQCwH4RpxtfrHf8AxGmoy1hYjidx85RJJS0bMdxVS2MsNXfM7P7Naagnu3vf5W3yE2HWFTELnsFLLe+gAzA636CK9otvU3U06Vsp95ug4DnITDWdWU3ylGB4E5hrrztOf2dm7L92y7drhy1DDZXqoM1RjqlJdDbT3nNwABuvryOf7K7ZYt8Ur561iwLhibEDeoQd0DyEicPs9HBVhe33gSpNt27p8pIbG2LlrIVdyuYd0tdd/HTd0l+mrbMyg10rN7GKTS7BSQDYkA68weMcyj+wOvdkhs3bi0lCVjlH3GsTpyNhwvv5SEcnJ0RnipWhH7R9q+wwhUXLVWFNQN7X1IHjbL/ilZ2EjIEQoytlBcHVSx32bcrX3jdaS3aXFU6uNp94MtGiXWxuC1RgLi28hVH9cRxtayixsW5b1HM8pGb3RdghpMfnaKKMut+YUkeoGkrXa3Ej9mexvew06sAfnJjE7OJSyOyG2jLwN731uDy1BlV7VoyUQXILXXNbce+LG3ORst6TKwDlYchpLl9mmI/5tRzVh8CfoJnuPxfeA4G3xt+Y9JO9lO0C4KvTqsufM2UrexAewLDTUgXNuPSWRW0ZZPTPoeESoVVdQym4IBB5gxWWlAQhCAEIQgBEMTTzI6/iVh6giLwgGe4faJZch0sdRxBGhB6gyD2ttQ3ZV4b5K9utmNRqe3S+SobMB917b/AgX8QecpzVBawmVxpm+MlKNotfY3tVhqFMo6OrlizvYMGPDUG6gDSxHzlhp7eR2LK9weGpt4AkaeEzjZYCutxoTYjx/vLbhtnJfQacfoZqx7RmyRSdkJ25xdbEUyigonIjvOPXQdLmULB4CogIYHUW3GbhT2crLlcZgOfwbpyM9t2bUi6EeDD6j8pGUZJ32ShOPTRQOz1SoiBSCQN1945jwhtykXBtLo+xnX7lvj8o2obKBZi+gB/Wv5SiXJs0qaa7Mep7DJYk33k+XD5GWChQVQtP8eRR4qHcn1K+suG29mW/6aEsF8ABwufoJS1ZhjcOpU5QWuToNQFGvOyqbdZriqjsnOUFiuJfBge5THRx5hDb4RpicP8Avr8u5/SP7SzNSHsVbky/5rp/qle2lUyV6infnJHg2o+BiXRkw7kDoNJymL7hp854Rs8coABKjWONlOL1bi9kX/MXv/4icxCKyi4B4ETxsZ0LujG2dVA8VzfnEsRQdFDG7KRr0PH4yqS2VP5FZ2ts9FclVsOsQKZFPhHOOxIZrMxsDu1+UaVVNQ/hTqbX/KdUWzp52XS7o5nQeG6WTA4cKyHdZl+d5G4ZqaalwTwtwjhcchP3vISx9Eoqi3UcV3iD/wBxl8vZhvneQG3ccgGHZ/d9o6N0UCqt/DuiL4fFhihswvUuc2l70ip8rgysdrMSuagm/L7SofEuQt+neb0lCW6OONbPOzMQP25FzXV0qIGHGxDKfRJO4/FYUZWcoXIt+8/dubad1jZW15c5TtnYpKWJw7ubKM12O4Z1ZQT0ufjNCerRVQ7OoG8XI+ElLu2Rh1o6NpD2IYXycP7f2mddq9pNVsvAnd4bpL9pu1NO1lbNbQW3f7ym4yqwQu+jEHKOV9366zkU2JySRF16t28MvwA+oli7JbKavUWu/wD00NlH4mH0H5DnIrs9sZsQ9jdUWxduV9wH8R/vNOw9JEARAFCgWA+6PzP956PjYOTt9Hl581Kl2WPYHbnCJ/yzs6OhK3ZSVa5voVuRvtqBul4pOGAZTcEXBG4gz56OyKqYl6hUlGdiGBuNTezcV5azY+xeKLUshPu6j+U/kfnJZsCiuS/2Qx5blxLPCEJlNAQhCAEIQgDPaGCSvTam4urCx+YI5EGxHhMe2/sWphKhVtUPuPwYfRuYm2RltLZ6V0KOAQel7Hz+Ui4pluPI4v8Aow9MRlKnkw+YmhbPPu+FvQ/kR6Ssbf7HorMoc0mHDKWRlPFRe48L24aSdwDkqD/Eflf6CSgmrJ5GpK0WehwHHgfp+vpHNOpY2OnL9cozw7hgOvw6/rmY6XXf7w+P+8sM4vUDW01kdXUnf8LD5R/nKi41HxE9LiEO8jznAR1LBZybiy7oyxmwqWdTlGbfe26Tr4pQLC3lGqd4kmDtsbtS/wCVa2/ISPEaj4iZ92hrH24P/cRXHiLq3yX1mkLpTZTyf5n85mnaGjc0XDg+z7jJbUCpmZXJ/DekV8SOcS6LcLqQ0Vap9xvQiDUcSd7kekVUA7/6hp6xVc43PcdZSbRidmuffqN5Wiq7OG5ndhyLH5R37ZuI9Jz2gMChJaCLuUQ7n4R6RXOJ4eqvGAelZBuQekXGKA3LaR74rgoHwjOstR975RyH5wRuiUrbZCWOYCxv5i/DjoT6yqVMazsfZrcgWLsOA1ueG8k+cc1MJTXVyWPjeTvZPYNPGJVrVnKYahcFE0Z2CBu8xG4AjQbyeFteqJXOaS2U3aTlkBJzHcTz1vf4xvsd0LPTa++624cx8p72hbKwAsL6a3tc2Avx4R72f2EGQ4h2stybbrC5AuTxJ3AX3X0ldqnZXT5aAYFE77m9tRfcOpkPiC+IqKiC5Y2UdN9zy5k/lLXtMUaVO9dSS57q72tzA4Ac5J7F2KlEGqqOGdRfN3ig/CCOJ0vqZZ4+PnLZDyJcY6F9n4AUKaUkFzzt7zfeZun9hJBcHlGrEk6k8z1imHVhrlsT8BwEcz3IpRVI8STbdjNUKag3J0tbf4yz9jVIqML6ZT6XX63kCiszZUBZj91Rc/2HUy79m9mtRQlxZ3NyN+UDcLjzPnM3kziote2X4ISck/SJuEITzjcEIQgBCEIAQhCARm19misv8a+6foehlTSmUbKRYX1B+6ZfpF7W2aKgzD3gP6hyP6/tJMlGXoh8M9rjlqJJ02zDrISixU2beunl+tPKPsLVs1juMkJIkKdSxsfMfUTxiaPEagwqC/QieaeJsbGcIjRtJ7DkdI/KqdRaI1MOu9mnRZHYjEd1uVjfw4zL9s1n/amtuZACP4Q+b1uoM0PbWNW3s00B949OI85SsXh74tW4FQPiZySsux/bs9KNL8DOEFd26OnoFCUPD5HUfCNwbaGVM2p2rPIqTjGcqUyIlnnDp6YTz7NeM8u5iZJg4e2ReQjaq3AaRRlkLtbaGUFE8z9BOohJjLa+0bEoh14t9BLD2N2gV2biKYPeasWb+UU0t/m1/wAMplGgWMumx8Lkwj2++/w7o+kugrb/AKRkzdL9la2gNLWuSQAOdhul97LbNLUaTVDcIMwW3dLHcSDvI1ty06yP7MbODs7uoZcoUAi++5fy90f4TLdhrIgRV7o3dBykP4spQTiR/kxjNxkQO0+zdGrVbFYmqyooHduFFlHPeBv3Rnh9rri61wp9nTtkQHS4OjuOfIcI27UYPE4qotMLkobywIOvMrcG15F9l9jWdlO9WKkjod4PKaPFwSjJOSKPJzxcWosvdfGqilnYKo4k2leqbZrV2tQpkU/xtdc38o3+cmKewaLMC6ZyN2Z2YDqFYkCO8VUVFAW2+2nQf7es9BpvRgTS6RbOwtT9wUI7yHU8SG1uTxNw0tEpnYSoWaoeGVfW7f3lznlZlU2ehjdxR2EISsmEIQgBCEIAQhCAEIQgEB2kooiGsTlK2BsL5gxC2tz1Gv6EVRqA2N7g8em8GTnainmwzj+U+jKZVsChVBy4dONv1zhTp0y2MeUbJs1yBY7x8RGFbFXOu47jHCuzKLC9t+trRniKV793fvU6X6jkZYQQqlYjc0MRVbL3e8x0FzoOpkaWZN2q9d48fznUxIO42PI/rWCXGxiFa+Zjcnj+URTD56qm36uDJgV7DvJcdN09nHoguEt8zB1tjHbtCxRt1wRboOPxMg6qXjzYfaZMbiMTgyozsl6LDcWp3Zl6XNtRvynpGqPcSqXZowS1X4EKdTgYPh+InMRT4iJjEtaygX6yJeecjcom7gRLE4mod6keEYvnO5W9IItiW0ccT3U8z+UiFwrObDdJyhsd33rlHxMl1wtOgpZiAFFzO2Rasg6eBSimd7ADnLFspPa4dABbOrkdAzaH0lB23jKuIa4UhB7q/U9ZqmBw1NMgotmpClTyN+IFEJboSbkjmTNXjpcmn+DB5UnWvQvhsOtNQqiwE5UJilRwBcyMq4osbIC09GKSR5crbG+18YFVrHcCSeQGpkP2KxJFJ6lQkKWJueJ5KOPlE+2VYpQykWLsBwvbeflaTvZzBBKKM6gEKLX+6OQ5SCtz/S/6TlSh+yQps9TvNdE4L99vH8I6b/CN8Wl7ncqiyj5nzPykiTcXFydwJ3X6DlGG1nCJbkL+gk262QW9Fp+z7EpapT++Tm8VHd+Bv6y6TMuwtA+2puL3ytm/lAb6t8pps8nI7mz0oqoo7CEJA6EIQgBCEIAQhCAEIQgDXaFLNSdfxKw9QZn2LxCooDBsrEMCPuspvv4ajz1miYp7Kx6H13D4zMMfh6tJrl6rJa90K3UfyspvpxvITi3tGnx5RVqRN4HGjUg7rBh46g+ElvaK+hFyeO63xmc4nbFOmrFMTUBsRYogFzxN1sd0r57XYpVsjB76DOqDjwC2Ou7hJwm2qaOZccU7s0/GtTDECotwbb9Qdd/TSVPtBt+hRIVjnbeQlmsObajL8+hmdYvEV662c3LMS2luJ3kcBcWH5RpU2W4tazXNrC+hPPSwllSfop5pdMu2G7e2yqqOWOmrLlvw3i8iNtdtcTWVksiIeKg5rce9zPhIzDbIZSGdgBa5tv1LDf8A4TFChqNpovIb+V9d3jOqMq2R+pbH32dVBT2hhnYWX2gTqC4KL/mZfImaD2hoeyxVVRuzZh4OA3lYkyhYaiEem3FXQjplYH6S27ZxJqYrEsToarKPBO4PggkJxovwP7j3eM8Thj7y/CCVrdRHtKspGkqNhG09o5dGAMdJtJDFq2FR/eUE84zqbHT7pZfCAK1No6aCVjbGIeu/s11C95uXT/aTNTZjgHK4I6ix9b/SeMLhlp3zZV55WzknzAkiMhjQ2PlTPVYgcr2+Un+yNbNRItbK7rpyvmHwYSIxVdajDO6qg3Je5Y/xflJDspU71dOThv6lAPyHrNHjupGLy43AsbU8+86CJY7EpQTM3gAN7E7gBxJMUNQLcnhKriazswrOuao1xQo/hB+83I21J4DTx9KzyeOxji8M9fG0g5BIGbINyAWOU8zmOp6S+pTAtpeVrZmzfYursc9Viys3DMyo4A5C1x5CWOnWuPdsf1vnVGlf5Iylbr8CzNvPLd48fy8zKp2hxdyEG9mA8h3j/pHnJ3F1sq7+H6P1lMd2qYhiozGmpAG67bzrw1sPKV5HUS3CuUrNW+zzB2Rqh/kXw0J/0y6SsdgGP7IFO9GK/wCVT8yZZ55Uk03ZvtPo7CEJwBCEIAQhCAEIQgBCEIBG7ZroiLnNgzKo6sfdHqJQu1e2kdmoIwspy1G4Zre5f0v104ES0faAhOCey5rFD1AzAXHXX4zJqT6ZdRbrl8dCpUmX4YpqyrJJrR4fZYJzBFPhb6zjYc2KlHA45WK3/pOvpFcltVNjyBHyzW9LRPEVigu4qAdHUfO4A8WEuaSK1JsZVcNb3RUHDh82EQasV3k33ANk1PADKL3vpO4nGU231nHju8mAsfKRlWwzMjG9tCdbetxfrOXrROr7HO0MRnfIDoBw1ub3Atx/vHGGphFuxA6X18WPCQ+BNjpdnPmfPlLNs3ZzXDMAX4X1CnoN1+u+QVsm2kJrRZgp+8xAW+lrsALDhc2GupvraSOPoVgzlct8zFgbg5sxvr4zzVX9/hkvcnEUMx/+VAFll21g3SrVYjutUcgjW13bQ8pVlWzR4z7KcmPddHpsOq978o6p4tG3NY8jofQyRekN9riN3w6NoVuJQbdgldxub5ROrtB9y3c8lF7eJ3CehslDqHcf4j+c9HDhO7TzM3NnbKvlexMHSOrNXYhbhSdy7zbmeUVXYt/fYseN9w8uMkMKiU7gku594jXy6COPafwNByhkmBSmtlUZjvI5cr9Y02RWyYkke6zmmbc8q6+OdbSUqtbU+PpulUr4goaaqLt7XMW4Ah8xHifkZbjdSTM+euLTLdtXaPfFGmM9RuAOgHNjwEUwOzxh0arWbM7WW/AZiAqqOpIjbYOBBqtiN41HqNQeslNpYY1K1IE9xAznqwsq3/qM9aLs8WdLQrjqYCsdxujjxWwPwHxjinVBXONxH1IPyjDbALhEBsGaxI5RvtnHph6YRSBYWA6DT9GTlJKNsqjBylSGe3dqBAQACx3DdcyN2LTyIWb33uTz8+pMisJUGIqnMSdNDwB4Ac5KPTKjLfxPOZXJydmzioR4o0/7OMWWWqhFrMCP/E/IS7ygfZkhPtGOtlVfUsfpL/MWb5sux/E7CEJWTCEIQAhCEAIQhACEIQCB7aD/AJKv/KD6OpmSUTc7iL8iRx6TZO0tEvhK6jeab28QpI+UxumONtOg6DjxmnB0yjL6HtOkLRHG0RY6R1SM5iUuCZaytEH2e2BSrnHKy99cO70rMyZXW+tlsGFytwbynYfCs43kjp+Qmg9ncQ1OvXIF1OFxGbTkgcdd6285XNm0lsPhrYjwIlKScnZfbUbQ42RglQWBAJ/gN/U3k4r5B7xJ8APpeNkqEL71x10P5GdA46yzSK1ti2waOfH4VP8A3Q5/wA1LnzSaHiEy1HVwGUs3xJIuOIsZTvs+oZtoqbf9Om7eoC/65ddpsWq1MutmA9FH95TJ/cacZD4zZFI3yXRuhuPQyGxGwKt9ArdQbeoMtNMX3iOLCQcUzQskkUY9n63FD5Ov5xT/ANNv95RfkXv8AbS4e01ilKnc3McESeWRW8F2fqbiERehufQC3xj7/gCD3nc+AA/OTbRCoTwhRRD6kn7K/tTZ1NabFUYWFyxuTpwF9BfwMp3bLCJhv2Smo177MebMFzE+c0LH0yzJTJuSwZhyRO8fjYeczvt5W9rXcjdRCDzJ73/l8JNJIrnckxDDbRekCyPbTUbwehHGTWE247UWqmmLBglwfvMpfdy7nPlKthqbVmSkgu7MAo5sxFvp6Gaz2o2XTwuzkw6hb50zG2rOFJZz109LCXfUcWkjJwTWzL9r9qay2CoByJ1sfD475XXqVcQczszG+87vTdLNiKdhqoNt4tvhTCMO7a3LdbxE65OXbJxjH0NNjYfIy+UnsOgbWM6eVDcm1poXZTsutULXqAZDYqv/AHP4m5L04/OXOMI2yEoNyJ/sNgPZYcMRY1Dm8ty/AX/xSyzii26dmGTt2XJUqOwhCcOhCEIAQhCAEIQgBCEIB4dQQQeMwyrRCVHQ37jMtuHdZhf4CEJfg7ZVl6H2HN/SFfXSEJcypC/Y3CZsVUW/dOHrBuuYov1lC2U9lW/IDx0hCVr5Mu/xJpH00ntWhCTZBFw+yyjfEVn/AA0wv9T/AP4k3jKmWu55swPrpCEofyZpgKLWBjfFYgKpJnYQWLsr+O2oyqWA0Hxk9jlxFCoUUK6gAglspsemvWEJz2Tl6O0sTW+9SXyfX5RRsUSCAMrddflCE6RGOIxCUVqEks+UszW4DgOnSUHZ+ENajiXPvOrnzsT84Qgi+iy/Y9sQMz4ptcncT+Yi7N0srAD+YyxfaM1hSXmzH0C//YwhOr5meXRnuJpgyu7Rwt4QlkiCGODoENrx0+U+n9j4f2dCkn4UQeii8ISrJ6JxH0IQlRMIQhACEIQD/9k=';
      } else if (age >= 18 && age <= 60) {
        message = "Adulto";
        imageUrl = 'data:image/jpeg;base64,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';
      } else {
        message = "Anciano";
        imageUrl = 'https://media.istockphoto.com/id/912073272/photo/happy-senior-man-sitting-at-home.jpg?s=612x612&w=0&k=20&c=O_e4_qWJJNvrRzU9pRvI3TiDbxpPUbHQxtA3D6eWZNs=';
      }

      setState(() {
        _age = age.toString();
        _message = message;
        _imageUrl = imageUrl;
      });
    } else {
      throw Exception('Failed to load data');
    }
  }

  @override
  Widget build(BuildContext context) {
    return Scaffold(
      appBar: AppBar(
        title: Text('Age Prediction App'),
      ),
      body: Padding(
        padding: const EdgeInsets.all(16.0),
        child: Column(
          mainAxisAlignment: MainAxisAlignment.center,
          children: <Widget>[
            TextField(
              controller: _nameController,
              decoration: InputDecoration(
                labelText: 'Nombre',
                border: OutlineInputBorder(),
              ),
            ),
            ElevatedButton(
              onPressed: () => predictAge(_nameController.text.trim()),
              child: Text('Predecir Edad'),
            ),
            Text('Edad: $_age'),
            Text('Categoría: $_message'),
            _imageUrl.isNotEmpty
                ? Image.network(_imageUrl)
                : SizedBox(),
          ],
        ),
      ),
    );
  }
}
